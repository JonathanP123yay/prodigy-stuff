<!DOCTYPE html>
<html>
<head>
  <title>Updating bookmarklet...</title>
</head>
<body>
  <h1>Updating bookmarklet...</h1>
  <p>Running the latest bookmarklet...</p>
  <script>
    fetch('./main.js')
      .then(res => res.text())
      .then(code => {
        // main.js is already a bookmarklet starting with "javascript:"
        // just redirect the browser to it to run
        window.location.href = code.trim();
      })
      .catch(err => {
        document.body.innerHTML += `<p style="color:red;">Failed to load main.js: ${err}</p>`;
      });
  </script>
</body>
</html>
